<template name="mdMyAccount">
  <div class="row">
    <div class="col-xs-12"><h2>Hi, {{user.profile.firstname}}!</h2></div>
  </div>
  <br />
  <div class="row">
    <div class="col-xs-12"><h3>Your Orders</h3></div>
  </div>

  <div class="row">
    <div class="col-xs-12">
      <div class="table-responsive">
        <table class="table table-striped">
          <tbody>
            {{#each orders}}
              {{> mdMyAccountOrder}}
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-5">
      <h3>Account Information</h3><hr />
        {{> mdMyAccountUserForm}}
    </div>
    <div class="col-sm-7">
      <h3>Shipping Information</h3><hr />
        {{> mdMyAccountShippingForm}}
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12">
      <h3>Data Permissions</h3><hr />
        {{> mdMyAccountDataPermissions}}
    </div>
  </div>


</template>

<template name="mdMyAccountOrder">
  {{#if show status}}
    <tr>
      <td>{{dateFormat createdAt format="MM/DD/YY"}}</td>
      <td>Order {{orderNumber}}</td>
      <td>{{archiveType}}</td>
      <td>${{price}}</td>
      <td>{{status}}</td>
    </tr>
  {{/if}}
</template>

<template name="mdMyAccountUserForm">
  {{#with userdet}}
   {{#if services.google}} 
     <strong>You are using Google to login.</strong> 
   {{else}}
     <form id="account-manage-form" class="form-horizontal">
       <div id="chsuccess" class="alert alert-success hidden">
         <strong>Success!</strong> Your password successfully changed.
       </div>
       <div id="cherror" class="alert alert-danger hidden">
         <strong>Failed!</strong> Incorrect current password.
       </div>
       <div id="passmatch" class="alert alert-warning hidden">
         
         <strong>Warning!</strong> These Passwords don't match. Please try again.
       </div>
       <div id="chpwd" class="alert alert-warning hidden">
         
         <strong>Warning!</strong>Re Enter password with constraints.
       </div>
       <div class="form-group">
         <label for="txtEmail" class="col-md-5 control-label">Email </label>   
           <div class="col-md-7">
             {{#each emails}}
               <input type="email" class="form-control" id="txtEmail" name="txtEmail" value="{{address}}" placeholder="Email" required>
             {{/each}}
           </div>
       </div>
       <div class="form-group">
         <div class="col-xs-12">(6-20 character password, min. one letter and one number required)</div>
       </div>
       <div id="currsucc" class="form-group">
         <label for="txtPassword" class="col-md-5 control-label">Current Password </label>   
       <div class="col-md-7">
         <input type="password" class="form-control" id="txtPassword" name="txtPassword" placeholder="Current Password" required>
       </div>
       </div>
       <div class="form-group">
         <label for="txtNewpassword" class="col-md-5 control-label">New-Password </label>   
       <div class="col-md-7">
         <input type="password" class="form-control" id="txtNewpassword" name="txtNewpassword" placeholder="New Password" required>
       </div>
       </div>
       <div class="form-group">
         <label for="txtRepassword" class="col-md-5 control-label">Re-enter Password </label>   
           <div class="col-md-7">
             <input type="password" class="form-control" id="txtRepassword" name="txtRepassword" placeholder="Re-enter Password" required>
           </div>
       </div>
       <div class="form-group">
         <div class="col-md-offset-7 col-md-5">
           <button type="submit" id="btChangePassword" class="btn btn-primary btn-block">Submit</button>
         </div>
       </div>
     </form>
   {{/if}}
  {{/with}}

</template>

<template name="mdMyAccountShippingForm">
  <form id="shipping-address-form" class="form-horizontal col-md-12">
    <div class="alert alert-danger address-errors" role="alert" style="display: none;"></div>
      <div class="form-group">
        <label for="name" class="col-md-3 control-label">Name</label>
        <div class="col-md-9">
          <input type="text" class="form-control" id="name" name="name" placeholder="Name" value="{{user.profile.shipTo.name}}">
        </div>
      </div>

      {{> mdAddress}}

      <div class="form-group">
        <div class="col-md-offset-8 col-md-4">
          <button type="submit" class="btn btn-primary btn-block">Update</button>
        </div>
      </div>
  </form>
</template>

<template name="mdMyAccountDataPermissions">
  <div class="row">
    <div class="col-sm-3">
      <img src="/images/google_200px.png" class="img-responsive" />
    </div>
    <div class="col-sm-3 data-permission-content">
       Status: Connected!
    </div>
    <div class="col-sm-3 data-permission-content">
        Access to Google Drive, Picasa <br />
        Read/Write permissions <br />
        Basic account info <br />
    </div>
    <div class="col-sm-3 data-permission-content">
        <a href="#">Revoke Permissions</a>
    </div>
  </div>
</template>
